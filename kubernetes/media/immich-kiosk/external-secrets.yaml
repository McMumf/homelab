apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: immich-kiosk-secrets
  namespace: immich
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: media-secret-store
    kind: ClusterSecretStore
  target:
    name: immich-kiosk-secret
    template:
      templateFrom:
        - configMap:
            name: immich-kiosk-config-tpl
            items:
              - key: config.yaml
  data:
    - secretKey: immichApiKey
      remoteRef:
        key: media/immich-kiosk
        property: immich-api-key
    - secretKey: weatherApiKey
      remoteRef:
        key: media/immich-kiosk
        property: weather-api-key
